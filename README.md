# üñ•Ô∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫ Basis VDI-–∫–ª–∏–µ–Ω—Ç–∞ —á–µ—Ä–µ–∑ Docker

–≠—Ç–æ—Ç —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π —Å–æ–¥–µ—Ä–∂–∏—Ç —Å–∫—Ä–∏–ø—Ç –¥–ª—è –∑–∞–ø—É—Å–∫–∞ **Basis VDI-–∫–ª–∏–µ–Ω—Ç–∞** –≤ Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ. –†–µ—à–µ–Ω–∏–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–ª–∏–µ–Ω—Ç –Ω–∞ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö Linux-—Å–∏—Å—Ç–µ–º–∞—Ö –±–µ–∑ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ ALT Linux –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π.

## üõ†Ô∏è –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

-   Linux (X11, –Ω–µ Wayland)
-   Docker
-   –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω–æ–º—É VPN (`tunsnx`)
-   –ü—Ä–∞–≤–∞ –Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–∞

## ‚úÖ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

-   –†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ Ubuntu, Debian, Fedora, Arch –∏ –¥—Ä—É–≥–∏—Ö –¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤–∞—Ö
-   –ü–æ–¥–¥–µ—Ä–∂–∫–∞ USB, –∑–≤—É–∫–∞, –±—É—Ñ–µ—Ä–∞ –æ–±–º–µ–Ω–∞
-   –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ DNS –∏–∑ `tunsnx`
-   –ü—Ä–æ—Å—Ç–æ–π –∑–∞–ø—É—Å–∫ –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π
-   –ù–µ —Ç—Ä–µ–±—É–µ—Ç —Ä—É—á–Ω–æ–π —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –ø–∞–∫–µ—Ç–æ–≤

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

1.  **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Docker** (–µ—Å–ª–∏ –µ—â—ë –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω)

    –î–ª—è Ubuntu/Debian:
    ```bash
    sudo apt update && sudo apt install -y docker.io
    ```

    1.1 **–î–æ–±–∞–≤—å—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –≥—Ä—É–ø–ø—É `docker`:**
    ```bash
    sudo usermod -aG docker $USER
    ```

    1.2 **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Å—Å–∏—é** (–≤—ã–π–¥–∏—Ç–µ –∏ –∑–∞–π–¥–∏—Ç–µ –∑–∞–Ω–æ–≤–æ)

2.  **–°–∫–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π**
    ```bash
    git clone https://github.com/vladeffekt/basis-vdi-client-setup.git
    cd basis-vdi-client-setup
    ```
    > **–í–ê–ñ–ù–û:** –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—ã –ø–æ–¥–∫–ª—é—á–µ–Ω—ã –∫ –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω–æ–º—É VPN (`tunsnx`)!

3.  **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –∫–ª–∏–µ–Ω—Ç**
    ```bash
    ./basis_run_from_ghcr.sh
    ```

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

-   –°–∫—Ä–∏–ø—Ç –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç —Ö–∞—Ä–¥–∫–æ–¥–∞ (IP, –ª–æ–≥–∏–Ω—ã, –ø–∞—Ä–æ–ª–∏)
-   DNS –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
-   –û–±—Ä–∞–∑ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∏–∑ –ø—É–±–ª–∏—á–Ω–æ–≥–æ —Ä–µ–µ—Å—Ç—Ä–∞ (GitHub Container Registry)
-   –ù–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è –ø—Ä–∞–≤–∞ root –¥–ª—è –∑–∞–ø—É—Å–∫–∞ (–µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤ –≥—Ä—É–ø–ø–µ `docker`)

## üìù –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

-   **–ó–∞–ø—É—Å—Ç–∏—Ç—å –∫–ª–∏–µ–Ω—Ç:** `./basis_run_from_ghcr.sh`
-   **–û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∫–ª–∏–µ–Ω—Ç:** `docker stop basis-vdi`
-   **–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏:** `tail -f basis-vdi-client.log`
-   **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å:** `docker restart basis-vdi`

## üì¶ –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ `basis_run_from_ghcr.sh`

-   –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ –æ–±—Ä–∞–∑–∞ `ghcr.io/vladeffekt/basis-vdi-client:latest`
-   –ï—Å–ª–∏ –æ–±—Ä–∞–∑–∞ –Ω–µ—Ç ‚Äî —Å–∫–∞—á–∏–≤–∞–µ—Ç –µ–≥–æ –∏–∑ GitHub Container Registry
-   –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç DNS-—Å–µ—Ä–≤–µ—Ä—ã –∏–∑ `/etc/resolv.conf` (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
-   –ó–∞–ø—É—Å–∫–∞–µ—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å –¥–æ—Å—Ç—É–ø–æ–º –∫ X-—Å–µ—Ä–≤–µ—Ä—É, USB –∏ —Å–µ—Ç–µ–≤—ã–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞–º
-   –ü–∏—à–µ—Ç –ª–æ–≥–∏ –≤ —Ñ–∞–π–ª `basis-vdi-client.log`

## ‚öôÔ∏è –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç

-   –û–±—Ä–∞–∑ –∫–ª–∏–µ–Ω—Ç–∞ —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ GitHub Container Registry
-   –°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç DNS –∏–∑ `tunsnx` —á–µ—Ä–µ–∑ `/etc/resolv.conf`
-   –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —Å –¥–æ—Å—Ç—É–ø–æ–º –∫:
    -   X11-—Å–µ—Ä–≤–µ—Ä—É (–¥–ª—è GUI)
    -   USB-—É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º (—Ç–æ–∫–µ–Ω—ã, —Ñ–ª–µ—à–∫–∏)
    -   –°–µ—Ç–∏ —Ö–æ—Å—Ç–∞ (–¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–º–∏ –∞–¥—Ä–µ—Å–∞–º–∏)
-   –ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ —Å–∫—Ä–∏–ø—Ç –º–æ–∂–Ω–æ –∑–∞–∫—Ä—ã—Ç—å ‚Äî –∫–ª–∏–µ–Ω—Ç –ø—Ä–æ–¥–æ–ª–∂–∏—Ç —Ä–∞–±–æ—Ç–∞—Ç—å

## ‚ö†Ô∏è –í–∞–∂–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ USB-—É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö

–í —Å–∫—Ä–∏–ø—Ç–µ –∑–∞–ø—É—Å–∫–∞ `basis_run_from_ghcr.sh` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–∞—Ä–∞–º–µ—Ç—Ä (—Å—Ç—Ä–æ–∫–∞ 103):
```bash
--device /dev/usb/hiddev0
```
–≠—Ç–æ—Ç –ø—É—Ç—å –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç, —á—Ç–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –¥–ª—è —Å–º–∞—Ä—Ç-–∫–∞—Ä—Ç (–Ω–∞–ø—Ä–∏–º–µ—Ä, –†—É—Ç–æ–∫–µ–Ω) –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ –∞–¥—Ä–µ—Å—É /dev/usb/hiddev0.
–û–¥–Ω–∞–∫–æ –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —Å–∏—Å—Ç–µ–º–∞—Ö —ç—Ç–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –º–æ–∂–µ—Ç –Ω–∞–∑—ã–≤–∞—Ç—å—Å—è –∏–Ω–∞—á–µ –∏–ª–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞—Ç—å –≤–æ–æ–±—â–µ, –Ω–∞–ø—Ä–∏–º–µ—Ä:
```bash
/dev/usb/hid/hiddev0
/dev/hidraw0
/dev/usb/hiddev0 #(—É—Å—Ç–∞—Ä–µ–≤—à–∏–π –ø—É—Ç—å)
``` 
## üìå –ü—Ä–æ–±–ª–µ–º–∞
- –ï—Å–ª–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, —Ç–æ–∫–µ–Ω—ã (USB-–∫–ª—é—á–∏) –º–æ–≥—É—Ç –Ω–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞—Ç—å—Å—è –≤ —É–¥–∞–ª—ë–Ω–Ω–æ–π —Å–µ—Å—Å–∏–∏, —á—Ç–æ –∫—Ä–∏—Ç–∏—á–Ω–æ –ø—Ä–∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –ø–æ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—É.

## üîç –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å
- –í—ã–ø–æ–ª–Ω–∏—Ç–µ –Ω–∞ —Ö–æ—Å—Ç–µ:
`ls -la /dev/usb/hiddev* /dev/usb/hid/hiddev* /dev/hidraw*`

## ‚úÖ –†–µ—à–µ–Ω–∏–µ
- –ò–∑–º–µ–Ω–∏—Ç–µ —Å—Ç—Ä–æ–∫—É –≤ —Å–∫—Ä–∏–ø—Ç–µ –Ω–∞ –∞–∫—Ç—É–∞–ª—å–Ω—ã–π –ø—É—Ç—å.

## üì¶ –í–µ—Ä—Å–∏–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

üõ†Ô∏è –û–±—Ä–∞–∑ `ghcr.io/vladeffekt/basis-vdi-client:latest` —Å–æ–±—Ä–∞–Ω –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å–ª–µ–¥—É—é—â–∏—Ö –ø–∞–∫–µ—Ç–æ–≤:

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç                            | –í–µ—Ä—Å–∏—è                | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ                                      |
|--------------------------------------|-----------------------|-------------------------------------------------|
| `vdi-client`                         | `2.2.8-r426.n553a10`  | –û—Å–Ω–æ–≤–Ω–æ–π –∫–ª–∏–µ–Ω—Ç Basis VDI                       |
| `vms-vdi-env-python3`                | `3.9.18-alt10basis1`  | –°—Ä–µ–¥–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è Python                         |
| `vms-vdi-env-python3-module-PyKCS11` | `1.5.3-alt10basis1`   | –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–±–æ—Ç—ã —Å USB-—Ç–æ–∫–µ–Ω–∞–º–∏ (–†—É—Ç–æ–∫–µ–Ω –∏ –¥—Ä.) |
| `vms-vdi-env-python3-module-dbus`    | `1.2.18-alt10basis1`  | –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å D-Bus (—Å–º–∞—Ä—Ç-–∫–∞—Ä—Ç—ã, –∞–≥–µ–Ω—Ç)         |


  üîñ **–í–µ—Ä—Å–∏—è –∫–ª–∏–µ–Ω—Ç–∞:** `2.2.8.r426.n553a10`  

  üìÅ –ò—Å—Ö–æ–¥–Ω—ã–µ –ø–∞–∫–µ—Ç—ã:
- `vdi-client-2.2.8-r426.n553a10.common.x86_64.rpm`
- `vms-vdi-env-python3-3.9.18-alt10basis1.x86_64.rpm`
- `vms-vdi-env-python3-module-PyKCS11-1.5.3-alt10basis1.x86_64.rpm`
- `vms-vdi-env-python3-module-dbus-1.2.18-alt10basis1.x86_64.rpm`

–≠—Ç–∏ –ø–∞–∫–µ—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –ø—Ä–∏ —Å–±–æ—Ä–∫–µ –æ–±—Ä–∞–∑–∞ –∏ –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—Ç:
- –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å ALT Linux
- –†–∞–±–æ—Ç—É —Å —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞–º–∏ –∏ —Ç–æ–∫–µ–Ω–∞–º–∏
- –ö–æ—Ä—Ä–µ–∫—Ç–Ω—É—é —Ä–∞–±–æ—Ç—É `desktop-agent-linux`

 üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ–±—Ä–∞–∑–∞:
–ï—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ –æ–±–Ω–æ–≤–∏—Ç—å –≤–µ—Ä—Å–∏—é –∫–ª–∏–µ–Ω—Ç–∞:
1. –ó–∞–º–µ–Ω–∏—Ç–µ RPM-—Ñ–∞–π–ª—ã –≤ `vms-vdi-env_rpm/`
2. –ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ –æ–±—Ä–∞–∑
3. –ó–∞–ª–µ–π—Ç–µ –Ω–∞ GHCR —Å –Ω–æ–≤—ã–º —Ç–µ–≥–æ–º (–Ω–∞–ø—Ä–∏–º–µ—Ä, `v2.3.0`)
4. –û–±–Ω–æ–≤–∏—Ç–µ `IMAGE_NAME` –≤ —Å–∫—Ä–∏–ø—Ç–µ.
